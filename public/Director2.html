<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Checkpoint 2 | Redirecting...</title>
    <style>
        body {
            text-align: center;
            padding-top: 50px;
            font-family: sans-serif;
            background: #121212;
            color: #eee;
        }
    </style>
</head>
<body>
    <h1>Checkpoint 2 | You are being redirected to your key...</h1>
    <p>If not redirected automatically, <a id="redirectLink" href="https://corgiside.vercel.app/Key.html">click here</a>.</p>

    <script>
    async function processCheckpointsAndRedirect() {
        try {
            const response = await fetch('https://noah.customcloudapp.net/api.php?f=returnKey');
            const data = await response.json();
            console.log('ReturnKey response:', data);

            if (data.success && data.key) {
                const key = data.key;
                const checkpoint1 = data.checkpoint1 ? 1 : 0;

                if (checkpoint1 === 1) {
                    const setCheckpointUrl = `https://noah.customcloudapp.net/api.php?f=setCheckpoint2&freeKey=${encodeURIComponent(key)}&checkPointValue=1`;
                    const updateRes = await fetch(setCheckpointUrl);
                    const updateData = await updateRes.json();
                    console.log('SetCheckpoint2 response:', updateData);
                }
            }
        } catch (error) {
            console.error('Error updating checkpoint2:', error);
        } finally {
            setTimeout(() => {
                window.location.href = document.getElementById('redirectLink').href;
            }, 3000);
        }
    }

    processCheckpointsAndRedirect();
</script>
</body>
</html>

